%=============================================================================
% Copyright (c) 2016-present Allan CORNET (Nelson)
%=============================================================================
% This file is part of Nelson.
%=============================================================================
% LICENCE_BLOCK_BEGIN
% SPDX-License-Identifier: LGPL-3.0-or-later
% LICENCE_BLOCK_END
%=============================================================================
function varargout = image(varargin)
  ax = newplot();
  ax.YDir = 'reverse';
  if (length(varargin) == 0)
    C = demo();
    im = __image__('CData', C, 'XData', [1, size(C, 2)], 'YData', [1, size(C, 1)], varargin{2:end});
    if nargout == 1
      varargout{1} = im;
    end
    return
  end
  if (ischar(varargin{1}))
    im = __image__(varargin{:});
  elseif ((length(varargin) == 1) || ((length(varargin) > 1) && (ischar(varargin{2}))))
    C = varargin{1}; 
    im = __image__('CData', C, 'XData', [1, size(C, 2)], 'YData', [1, size(C, 1)], varargin{2:end});
    axis(ax, 'image');
  elseif (numel(varargin) == 2)
    C = varargin{1};
    axis('maximal');
    im = __image__('CData', C, 'XData', [1, size(C, 2)], 'YData', [1, size(C, 1)]);
    if exist('zoom')
      zoom(varargin{2});
    end
  elseif (length(varargin) >= 3)
    x = varargin{1};
    y = varargin{2};
    C = varargin{3};
    varargin(1:3) = [];
    im = __image__('XData', x, 'YData', y, 'CData', C, varargin{:});
    axis(ax, 'image');
  else
    error(_('Invalid input arguments.'));
  end
  if nargout == 1
    varargout{1} = im;
  end
end
%=============================================================================
function cdata = demo()
  cdata = [194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  158    0    0    0  122  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194   86    0   14   76   76   76   28    0   50  180    0    0    0    0   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194   50   42   76   76   76   76   76   76   76   56    6   76   76   76   76   51   29  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194   14   56   76   76   76   76    0    0    0    0   20   70    0    0    0    0   25   65    0  187  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  172    0   70   76   76   76   62    0  255  255  255  255  189    0    0  227  255  255  170   11   76    3  151  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  137    8   76   76   76   76   48   47  255  255  255  255  255  255  236    0  227  255  255  255  217    0    0  151  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  137    8   76   76   76   34   94  255  255  255  255  255  142    0   19  255  255  255  123   85  255  255  255   57  115  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  137    8   76   76   76   34   94  255  255  255  255   94    0    0    0    0  227   76    0    0   38  255  255   57  115  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  187    0    0    0    0    0    8   76   76   76   34   94  255  255  255  255   94    0    0    0    0  227   76    0    0   38  255  255   57  115  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    0    0    0    0  123  179    8   76   76   76   34   94  255  255  255  255   94    0    0    0    0  227   76    0    0   38  255    9    0    0    0    0    0    0    0  129  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    9  255  255  255  132   23   76   76   76   76   34   94  255  255  255  255   94    0    0    0    0  227   76    0    0    0    0   73   76   76   76   76   76   76   11    0    0   57  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    9  255  255   85   37   76   76   76   76   76   34   94  255  255  255  255  255  142    0   19  255   28    0   39   76   76   76   76   76   76   76   76   76   76   76   76   39    0   22  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    9  255  255   85   37   76   76   76   76   76   34   94  255  255  255  255  255  255  255  236    0   68   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   53    0    0  180  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    0    0  217   85   37   76   76   76   76   20    0    0    0    0    0  208  255  255  189    6   76   76   76   76   76   76   76   76   76   76   45   17   76   76   76   25    0   23   76   76    6  144  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    0    0    0   51   76   76   76   76   76   76   76   76   76   76   76   14    0    0   20   76   76   76   76   76   76   76   76   76   76   76   76   59    3   76   76   25   37   76   76   76   76   20  108  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115    0    3   76   76   76   39    0    0    0   70   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   59    3   76   76   25   37   76   76   76   76   20  108  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194   43    0    0    0    0    0    0    0  123  255  255  255   19    0   42   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194    7    0  151  151    0    9  255  255  255  255  255  255  255  255  255  113    0   14   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194    7  198  255  151   57  255  255  255  255  255  255  255  255  255  255  255  255  208    0   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194    7  198  255  151   57  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0   62   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194    7  198  255  151   57  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0   62   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194   43  151  151   57  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255   47   48   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194   43    0    0   57  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255   47   48   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   34   72  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115    0    9  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255   94   34   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   20  108  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    9  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255   94   34   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   20  108  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115   57  246    0  217  255  255  255  255  255  255  255  255  255  255  255  255   47    0    0   20   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76    6  144  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115   57  255  255   38  170  255  255  255  255  255  255  255  255  255  255    0  208  255  142    0    0    0   68   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   53    0    0  180  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115    0    9  255  255   85  123  255  255  255  255  255  255  255  255  255  255  255  255  255  255  236    0    0    0    0   25   76   76   76   76   76   76   76   76   76   76   25    0    0   22  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  151    0    0  217  255  132    0   28  255  255  255  255  255  255  255  255  255  255  255  255  255  255   28    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0   57  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194   29    0    0    0    0    0    0    0  142  255  255  255  255  255  255  255  255  255  255  255  255  123    0    0    0    0    0    0    0    0    0    0    0  129  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  115    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0  255  255   94    0    0    0    0    0    0    0   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194   43    0    0   47  213  213   32    0    0   76  255  255  255   66   42   76   62    0  255  255  255  255  189   14  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194    7    0  126  213  213  213  213  213   71  123  255  255  255  255   66   42   76   62    0  255  255  255  255  255  236    0  172  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72    0    0   14  194  194  194  194  194  165    0    0  166  213  213  213  213  213  213   71  123  255  255  255   19   56   76   76   62    0  255  255  255  255  255  255  255   28  137  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72   34   76   70    0    0  137  194  129    0    0  205  213  213  213  213  213  213   32  170  255  255  227    0    0   56   76   76   62    0  255  255  255  255  255  255  255   28  137  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72   34   76   76   76   76   23    0   85  217    0  205  213  213  213  213  213  213   32  170  255  179    8   76   76   20   42   76   62    0  255  255  255  255  255  255  255   28  137  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72   34   76   76   76   76   23  132  255  217    0  205  213  213  213  213  205    0  217  255  255  179    8   76   76   76   34   28   62    0  255  255  255  255  255  255  255   28  137  194  194  165    0    0    0  115  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72   34   76   76   76   76   23  132  255  255  255    9  166  213  213  166    9  255  255  255  132    0    8   76   76   76   34    0   47  255  255  255  255  255  255  255  255   28  137   93    0   11   76   76   17    0   79  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194   72   34   76   76   76   76   76   37   85  255  255  255   57    0    0   57  255  255  255  255  132    0    8   76   76   76   76   48   47  255  255   47    0    0    0   19  255  255   76   39   76   65    0   73   17    0   79  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  108   20   76   76   76   76   76   51   38  255  255  255  255  255  255  255  255  255   85   37   53    8   76   76   76   76   76   62    0    0   62   76   76   76   70    0  227   76   39   51   11   76   76   76   31    0    0    7  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  108   20   76   76   76   76   76   76   65    0    0  198  255  255  255  246    0    0   51   76   53    8   76   76   76   76   48   14   76   76   76   76   76   76   70    0  227   76   39   51   11   76   76   76   31   31   76   73    0  165  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  108   20   76   76   76   76   76   76   76   76   76   17    0    0    0    3   76   76   76   76   76   68    0   70   76   76   76   76   76   76   76   76   76   76   76   76    8    0   39   76   65    0    0    0   45   76   76   76   76   11  129  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  144    6   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   68    0   70   76   76   76   76   76   76   76   76   76   76   76   76   76   76   37    0    0    0    0   59   76   76   76   76   76   11  129  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  144    6   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   68    0   70   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   51   11   76   76   17    0   31   76   73    0    0  129  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  180    0   68   76   76   76   76   76   76   76   76   76   76   76   76   76   76   76   53    0    0    0   56   76   76   76   76   76   76   76   76   76   76   76   76   76   37    0   11   76   76   76   76   45    0    7  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194   22    0    0   25   76   76   76   76   76   76   76   76   76   76   25    0   76  255  255  255   66   42   76   76   76   76   76   76   76   76   76   76    8    0   39   76   76   76   76   76   76   45   43  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194   57  132  170    0    0    0    0    0    0    0    0    0    0  170  255  255  255  255  255  255  113   28   76   76   76   76   76   76   76   76   76    8    0    0   25   76   76   76   76   31   79  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194   93   85  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  161    0    0   76   76   76   76   56    0    0  172  194  194  129    0    0    0    0  115  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255  255  255  255  255  255  255  255  255  255  255  227    0    0  189  255  255  255  255    0    0    0    0    0    0    0  172  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0  246  255  255  151    0    0    0    0  170  132    0   28  255  255   66    0    0   47  255  255  255  255  142   66  255  255   28    0  101  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0    0    0    0  104  255  255  255   38    0    0   76  255  255  255  255  255  255  208    0  255   47    0  113  255  255  255  255  255  123   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255  255  255  255  255  246    0    0    0  123  255  255  255  255  255  255  255  208    0    0  208  255  255  255  255  255  255  255  123   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0  246  255  255  255  255  246    0  217  255  255  255  255  255  255  255  255  255  255  255    0  208  255  255  255  255  255  255  255  255  170   29  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0    0    0  151  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0  208  255  255  255  255  255  255  255  255  170   29  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0  208  255  255  255  255  255  255  255  255  170   29  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0  208  255  255  255  255  255  255  255  123   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255  255    0  208  255  255  255  255  255  255  255  123   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0    0  198  255  255  255  255  255  255  255  255  255  255  255  255  255  255  161    0    0  255  255  255  255  255  236    0    0    0    0   65  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  129   38  255  255   57    0    0    0    0    0    0  170  255  255  255  255   19    0    0   94  255  255    0    0    0    0    0   19  255  255   76  101  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  165    0    0  198  255  255  255  255  255  255   85    0    0    0    0  236  255  255  255  208    0  255  255  255  255  255  255  255   28  137  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194   43    0    0    0    0    0  217  255  255  255  255  255  255  255  113    0   36  194    0    0    0    0    0    0    0  172  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194   29    0    0    0    0    0    0    0  108  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194;
  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194  194];
end
%=============================================================================
